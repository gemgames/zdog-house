var i,j,k,Aa,Bb,Cc,Dd;console.log("%cLoading Script","font-weight: bold; text-align: center;"),console.time("Script Loading Time");var Zdog,Zfont,pastMoveX=0,pastMoveY=0;Zfont.init(Zdog);var undoElement,draggable,eC,eF,eT,TAU=Zdog.TAU,round=function(e){return Math.round(e)},power=function(e){return Math.pow(e)},sqrt=function(e){return Math.sqrt(e)},abs=function(e){return Math.abs(e)},floor=function(e){return Math.floor(e)},rad=function(e){return e/360*TAU},deg=function(e){return e/TAU*360},sin=function(e){return Math.sin(e/360*TAU)},cos=function(e){return Math.cos(e/360*TAU)},pos=function(e){return e%TAU>=0?1:-1},log=console.log,temp=function(){},style="rgb",doc={gebi:function(e){return document.getElementById(e)},cover:(doc={gebi:function(e){return document.getElementById(e)}}).gebi("cover"),debug:doc.gebi("debug"),camera:doc.gebi("camera"),finished:doc.gebi("finished"),elements:doc.gebi("elements"),elementsP:doc.gebi("elementsP"),elementData:doc.gebi("elementsData"),addElements:doc.gebi("addElements"),elementDataTable:doc.gebi("elementsDataTable"),cameraDiv:doc.gebi("cameraDiv"),finishedDiv:doc.gebi("finishedDiv"),sidebar:doc.gebi("sidebar"),moveIcon:doc.gebi("moveIcon"),rotateIcon:doc.gebi("rotateIcon"),sizeIcon:doc.gebi("sizeIcon"),redIcon:doc.gebi("redIcon"),greenIcon:doc.gebi("greenIcon"),blueIcon:doc.gebi("blueIcon")},featureIDs=["Red","Green","Blue","RedR","GreenR","BlueR","Height","Depth","Width","Diameter","Radius","Color","Fill","Stroke","FrontFace","RearFace","LeftFace","RightFace","TopFace","BottomFace","Quarters","CornerRadius","Sides","BackFace","Text","FontSize","Line"],elementDataHide={rect:[7,9,10,14,15,16,17,18,19,20,21,22,23,24,25,26],roundedrect:[7,9,10,14,15,16,17,18,19,20,22,23,24,25,26],ellipse:[7,9,10,14,15,16,17,18,19,21,22,23,24,25,26],circle:[6,7,8,9,14,15,16,17,18,19,21,22,23,24,25,26],torus:[6,7,8,9,12,14,15,16,17,18,19,21,22,23,24,25,26],polygon:[7,9,10,14,15,16,17,18,19,20,21,22,23,24,25,26],line:[0,1,2,3,4,5,6,7,8,9,10,12,14,15,16,17,18,19,20,21,22,23,24,25],shape:[0,1,2,3,4,5,6,7,8,9,10,12,14,15,16,17,18,19,20,21,22,23,24,25],hemisphere:[6,7,8,9,14,15,16,17,18,19,20,21,22,24,25,26],cone:[6,8,9,10,14,15,16,17,18,19,20,21,22,24,25,26],cylinder:[6,8,9,10,14,15,16,17,18,19,20,21,22,24,25,26],box:[9,10,20,21,22,23,24,25,26],text:[6,7,8,9,10,12,13,14,15,16,17,18,19,20,21,22,23,26],camera:[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],folder:[0,1,2,3,4,5,6,7,8,9,10,12,14,15,16,17,18,19,20,21,22,23,24,25,26]},edI={string:["translate.y","translate.z","translate.x","rotate.x","rotate.z","rotate.y","scale.y","scale.z","scale.x","diameter","radius","color","fill","stroke","frontFace","rearFace","leftFace","rightFace","topFace","bottomFace","quarters","cornerRadius","sides","backface","value","fontSize","path"],array:[]},elementDataType="nnnnnnnnnnnsbnssssssnnnssn?b",cameraCanvas=doc.camera.getContext("2d"),mode={mouse:!1,move:!1,rotate:!1},dimension={red:!1,green:!1,blue:!1},iconS="/zdog-house/icons/",finished=new Zdog.Illustration({element:"#finished",resize:!0,dragRotate:!0}),camera=new Zdog.Illustration({element:"#camera",resize:!0}),cube=new Zdog.Illustration({element:"#cube",dragRotate:!0}),debug=function(e){console.log(e)},subModes=function(e){mode.move&&(doc.redIcon.src=dimension.red?iconS+style+"/redH.svg":iconS+style+"/red.svg",doc.greenIcon.src=dimension.green?iconS+style+"/greenH.svg":iconS+style+"/green.svg",doc.blueIcon.src=dimension.blue?iconS+style+"/blueH.svg":iconS+style+"/blue.svg"),mode.rotate&&(doc.redIcon.src=dimension.red?iconS+style+"/redRH.svg":iconS+style+"/redR.svg",doc.greenIcon.src=dimension.green?iconS+style+"/greenRH.svg":iconS+style+"/greenR.svg",doc.blueIcon.src=dimension.blue?iconS+style+"/blueRH.svg":iconS+style+"/blueR.svg"),mode.size&&(doc.redIcon.src=dimension.red?iconS+style+"/heightH.svg":iconS+style+"/height.svg",doc.greenIcon.src=dimension.green?iconS+style+"/depthH.svg":iconS+style+"/depth.svg",doc.blueIcon.src=dimension.blue?iconS+style+"/widthH.svg":iconS+style+"/width.svg")},clickMode=function(e){(mode={size:!1,move:!1,rotate:!1})[e]=!0,doc.moveIcon.src=mode.move?iconS+style+"/moveH.svg":iconS+style+"/move.svg",doc.rotateIcon.src=mode.rotate?iconS+style+"/rotateH.svg":iconS+style+"/rotate.svg",doc.sizeIcon.src=mode.size?iconS+style+"/sizeH.svg":iconS+style+"/size.svg",subModes()},click3D=function(e){(dimension={red:!1,green:!1,blue:!1})[e]=!0,subModes()},ectf=function(){eT=elements[highlightedElement].type,eC=elements[highlightedElement].camera,eF=elements[highlightedElement].finished};clickMode("move"),click3D("red");var directionalCubeElement,lato=new Zdog.Font({src:"https://cdn.glitch.com/ddcae6e8-a8ce-49f0-af72-87dbb1d6a609%2FLato-Regular.ttf?v=1591372213037"}),cubeElements=function(){directionalCubeElement=new Zdog.Box({addTo:cube,width:40,height:40,depth:40,color:"#C00",leftFace:"#00F",rightFace:"#00F",frontFace:"#080",rearFace:"#080"});var e=new Zdog.Text({addTo:cube,translate:{z:30,x:-17,y:3},color:"#FFF",fill:!0,fontSize:10,font:lato,value:["FRONT"]});e.copy({translate:{z:-30,x:13,y:3},rotate:{y:TAU/2},value:["BACK"]}),e.copy({translate:{z:14,x:30,y:3},rotate:{y:-TAU/4},value:["RIGHT"]}),e.copy({translate:{z:-12,x:-30,y:3},rotate:{y:TAU/4},value:["LEFT"]}),e.copy({translate:{z:3,x:-9,y:-30},rotate:{x:-TAU/4,z:TAU/2,y:TAU/2},value:["TOP"]}),e.copy({translate:{z:-2,x:-17,y:30},rotate:{x:-TAU/4},fontSize:8,value:["BOTTOM"]})};cubeElements();var loadElementData=function(){},fileData={name:"My Model",background:"#FFFFFF",animate:{red:0,green:0,blue:3},groups:[{type:"illo",name:"",camera:camera,finished:finished},{type:"folder",name:"Group",camera:new Zdog.Group({addTo:camera}),finished:new Zdog.Group({addTo:finished})}]},elements=[{type:"camera",name:"Camera",group:"",translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0}},{type:"ellipse",name:"Ellipse",group:"Group",camera:new Zdog.Ellipse({addTo:camera,width:1,height:1,depth:1,scale:{x:80,y:80,z:0},diameter:80,translate:{z:40,x:0,y:0},stroke:20,color:"#663366"}),finished:new Zdog.Ellipse({addTo:finished,width:1,height:1,depth:1,scale:{x:80,y:80,z:0},diameter:80,translate:{z:40,x:0,y:0},stroke:20,color:"#663366"})},{type:"rect",name:"Rectangle",group:"Group",camera:new Zdog.Rect({addTo:fileData.groups[1].camera,width:1,height:1,depth:1,scale:{x:80,y:80,z:0},translate:{z:-40,x:0,y:0},stroke:12,color:"#EE6622",fill:!0}),finished:new Zdog.Rect({addTo:fileData.groups[1].finished,width:1,height:1,depth:1,scale:{x:80,y:80,z:0},translate:{z:-40,x:0,y:0},stroke:12,color:"#EE6622",fill:!0})}],templateElements={rect:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:0,y:0,z:0},scale:{y:80,x:80},color:"#EE6622",fill:!0,stroke:12},roundedrect:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:80,z:0},color:"#EEAA00",fill:!0,stroke:12,cornerRadius:20},ellipse:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:60,z:0},diameter:1,color:"#CC2255",fill:!0,stroke:12,quarters:4},circle:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:80,z:0},diameter:20,color:"#EE6622",fill:!0,stroke:12,quarters:4},polygon:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:80,z:0},color:"#EEAA00",backface:"#EEAA00",fill:!1,stroke:20,sides:5},line:{color:"#EE6622",path:[{x:-40,y:-40,z:0},{x:40,y:40,z:0}],stroke:10,closed:!1},text:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},color:"#663366",font:lato,fill:!0,value:["Aa"],fontSize:60,stroke:0},torus:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:80,z:0},diameter:20,color:"#EE6622",fill:!1,stroke:20,radius:80,quarters:4},hemisphere:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:80,z:80},diameter:1,color:"#CC2255",fill:!0,stroke:0,backface:"#EEAA00"},cone:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,diameter:1,scale:{x:0,y:0,z:0},length:1,color:"#663366",fill:!0,stroke:0,backface:"#CC2255"},cylinder:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:0,y:0,z:0},diameter:1,length:1,color:"#CC2255",fill:!0,stroke:0,backface:"#EE6622"},box:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:80,z:80},length:80,color:"#CC2255",fill:!0,stroke:0,frontFace:"#EE6622",rearFace:"#EE6622",leftFace:"#EEAA00",rightFace:"#EEAA00",topFace:"#CC2255",bottomFace:"#CC2255",backFace:!1},shape:{path:[{x:-40,y:-40,z:0},{x:40,y:-40,z:0},{x:-40,y:40,z:0},{x:40,y:40,z:0}],color:"#663366",fill:!0},folder:{updateSort:!0},object:{updateSort:!0,translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0}}},highlightedElement=1,loadElements=function(){Aa='<div class="elementName" '+(Bb=0===highlightedElement?'id="highlightedElement"':"")+' onclick="loadElementData(0)"><img src="/zdog-house/icons/elements/camera.svg"><span class="element-name">Camera</span></div></div>';var e,t=function(e){Dd=""===elements[e].group?"":"> ",Bb=e===highlightedElement?'id="highlightedElement"':"",Aa=Aa.concat('<div class="elementName" '+Bb+' onclick="loadElementData('+e+')">'+Dd+'<img src="/zdog-house/icons/elements/'+elements[e].type+'.svg"><div class="moreDropdown"><span class="element-name">'+elements[e].name+'</span><img class="moreIcon" src="/zdog-house/icons/elements/more.svg"><img class="more-content" onclick="duplicateElement('+e+')"src="/zdog-house/icons/file/duplicate.svg"><img class="more-content" onclick="deleteElement('+e+')" src="/zdog-house/icons/file/delete.svg"><img class="more-content" onclick="moveElement('+e+')"src="/zdog-house/icons/file/move.svg"></div></div>')};for(i of(Cc={},fileData.groups))Cc[i.name]=[];for(i=1;i<elements.length;i++)Cc[elements[i].group].push({name:elements[i].name,type:elements[i].type,num:i});for(i=0;i<fileData.groups.length;i++)for(j of(""===fileData.groups[i].name||(e=i,Aa=Aa.concat('<div class="elementName"><img src="/zdog-house/icons/elements/'+fileData.groups[e].type+'.svg"><div class="moreDropdown"><span class="element-name">'+fileData.groups[e].name+'</span><img class="moreIcon" src="/zdog-house/icons/elements/more.svg"><img class="more-content" onclick="nameGroup('+e+')"src="/zdog-house/icons/file/name.svg"><img class="more-content" onclick="duplicateGroup('+e+')"src="/zdog-house/icons/file/duplicate.svg"><img class="more-content" onclick="deleteGroup('+e+')" src="/zdog-house/icons/file/delete.svg"></div></div>')),Cc[fileData.groups[i].name]))0!==j.num&&t(j.num);doc.elementsP.innerHTML=Aa},elementSwitch=function(e){switch(e){case"box":Aa=new Zdog.Box(Aa),temp(),Bb=new Zdog.Box(Bb);break;case"circle":Aa=new Zdog.Ellipse(Aa),temp(),Bb=new Zdog.Ellipse(Bb);break;case"cone":Aa=new Zdog.Cone(Aa),temp(),Bb=new Zdog.Cone(Bb);break;case"cylinder":Aa=new Zdog.Cylinder(Aa),temp(),Bb=new Zdog.Cylinder(Bb);break;case"ellipse":Aa=new Zdog.Ellipse(Aa),temp(),Bb=new Zdog.Ellipse(Bb);break;case"hemisphere":Aa=new Zdog.Hemisphere(Aa),temp(),Bb=new Zdog.Hemisphere(Bb);break;case"line":Aa=new Zdog.Shape(Aa),temp(),Bb=new Zdog.Shape(Bb);break;case"polygon":Aa=new Zdog.Polygon(Aa),temp(),Bb=new Zdog.Polygon(Bb);break;case"rect":console.log(Aa),Aa=new Zdog.Rect(Aa),temp(),console.log(Aa),Bb=new Zdog.Rect(Bb);break;case"roundedrect":Aa=new Zdog.RoundedRect(Aa),temp(),Bb=new Zdog.RoundedRect(Bb);break;case"shape":Aa=new Zdog.Shape(Aa),temp(),Bb=new Zdog.Shape(Bb);break;case"text":Aa=new Zdog.Text(Aa),temp(),Bb=new Zdog.Text(Bb);break;case"torus":Aa=new Zdog.Ellipse(Aa),temp(),Bb=new Zdog.Ellipse(Bb);break;case"folder":Aa=new Zdog.Group(Aa),temp(),Bb=new Zdog.Group(Bb);break;case"object":Aa=new Zdog.Group(Aa),temp(),Bb=new Zdog.Group(Bb)}},addElement=function(e){if("polygon"===e){let e=prompt("How many sides for the polygon? (SIDES CANNOT BE CHANGED LATER DUE TO A BUG)","");if(null===e)return;templateElements.polygon.sides=e}if("cylinder"===e){let e=prompt("How long should the cylinder be corresponding to the size? (eg: 1 = the size, 2 = twice the size, etc.) LENGTH CANNOT BE CHANGED LATER DUE TO A BUG","");if(null===e)return;templateElements.cylinder.length=1*e}Bb="testasgasgdsa",temp=function(){(Bb=templateElements[e]).addTo=finished},(Aa=templateElements[e]).addTo=camera,elementSwitch(e),"folder"===e||"object"==e?fileData.groups.push({name:e,type:e,camera:Aa,finished:Bb}):elements.push({name:e,type:e,camera:Aa,finished:Bb,group:""}),highlightedElement=elements.length-1,loadElements(),loadElementData(highlightedElement)},duplicateElement=function(e){if("cylinder"===elements[e].type){let t=prompt("How long should the duplicated cylinder be corresponding to the size? (eg: 1 = the size, 2 = twice the size, etc.) LENGTH CANNOT BE CHANGED LATER DUE TO A BUG",elements[e].camera.length);elements[e].camera.length=1*t,elements[e].finished.length=1*t}temp=function(){(Bb=elements[e].finished).addTo=finished},(Aa=elements[e].camera).addTo=camera,elementSwitch(elements[e].type),elements.splice(e,0,{type:elements[e].type,name:elements[e].name,camera:Aa,finished:Bb,group:elements[e].group}),loadElements()},duplicateElementS=function(e){temp=function(){(Bb=elements[e].finished).addTo=finished},(Aa=elements[e].camera).addTo=camera,elementSwitch(elements[e].type),elements.push({type:elements[e].type,name:elements[e].name,camera:Aa,finished:Bb,group:elements[e].group})},deleteElement=function(e){confirm('Delete "'+elements[e].name+'"?')&&(camera.removeChild(elements[e].camera),finished.removeChild(elements[e].finished),elements.splice(e,1),e===elements.length&&(highlightedElement=e-1))},deleteElementS=function(e){camera.removeChild(elements[e].camera),finished.removeChild(elements[e].finished),elements.splice(e,1)},moveElement=function(e){let t=prompt('The group to move element "'+elements[e].name+'" to: (leave blank for no group)',"");for(i=0;i<fileData.groups.length;i++)if(fileData.groups[i].name===t){t=fileData.groups[i];break}log(t),i!==fileData.groups.length?(t.camera.addChild(elements[e].camera),t.finished.addChild(elements[e].finished),elements[e].group=t.name,loadElements(),loadElementData(e)):alert("No such group detected! Perhaps a typo?")},moveElementS=function(e,t){for(i=0;i<fileData.groups.length;i++)if(fileData.groups[i].name===t){t=fileData.groups[i];break}i===fileData.groups.length&&(t=fileData.groups[0]),t.camera.addChild(elements[e].camera),t.finished.addChild(elements[e].finished),elements[e].group=t.name},nameGroup=function(e){let t,a=prompt('Rename "'+fileData.groups[e].name+'" to:',"");if(null!==a)if(""!==a){for(t=0;t<elements.length;t++)elements[t].group===fileData.groups[e].name&&(elements[t].group=a);fileData.groups[e].name=a,loadElements()}else alert("The name cannot be blank, silly!")},duplicateGroup=function(e){if(confirm('Duplicate "'+fileData.groups[e].name+'" and everything in it?')){for(Aa={addTo:camera},Aa=new Zdog.Group(Aa),Bb={addTo:finished},Bb=new Zdog.Group(Bb),fileData.groups.push({name:fileData.groups[e].name+"2",type:fileData.groups[e].type,camera:Aa,finished:Bb}),Dd=elements.length,log(Dd),j=0;j<Dd;j++)log("Testing element"+j),elements[j].group===fileData.groups[e].name&&(log(elements[elements.length-1]),duplicateElementS(j),log(elements[elements.length-1]),moveElementS(elements.length-1,fileData.groups[e].name+"2"));loadElements()}},deleteGroup=function(e){if(confirm('Delete "'+fileData.groups[e].name+'" and everything in it?')){for(Dd=elements.length,j=0;j<Dd;j++)log("Testing element"+j),elements[j].group===fileData.groups[e].name&&(deleteElementS(j),Dd--,j--);camera.removeChild(fileData.groups[e].camera),finished.removeChild(fileData.groups[e].finished),fileData.groups.splice(e,1),highlightedElement=0,loadElements()}};loadElements(),loadElementData=function(e){highlightedElement=e,loadElements();var t=(Aa="camera"===elements[e].type)?elements[e]:elements[e].camera;document.getElementById("edcHeader").value=elements[highlightedElement].name,log(t.color);let a=[t.translate.y,t.translate.z,t.translate.x,deg(t.rotate.x),deg(t.rotate.z),deg(t.rotate.y),Aa?0:t.scale.y,Aa?0:t.scale.z,Aa?0:t.scale.x,t.diameter,t.radius,t.color,t.fill,t.stroke,t.frontFace,t.rearFace,t.leftFace,t.rightFace,t.topFace,t.bottomFace,t.quarters,t.cornerRadius,t.sides,t.backface,t.value,t.fontSize,t.path];for(i=0;i<featureIDs.length-1;i++)log("checking"+i),document.getElementById("edb"+featureIDs[i]).style.display="block",elementDataHide[elements[highlightedElement].type].includes(i)||("b"===elementDataType.charAt(i)?document.getElementById("edc"+featureIDs[i]).checked=a[i]:document.getElementById("edc"+featureIDs[i]).value=a[i]);if(function(e){for(i=0;i<e.length;i++)document.getElementById("edb"+featureIDs[e[i]]).style.display="none"}(elementDataHide[elements[highlightedElement].type]),!elementDataHide[elements[highlightedElement].type].includes(26)){for(console.log("in"),document.getElementById("edb"+featureIDs[26]).style.display="block",i=1;i<elements[highlightedElement].camera.path.length+1;i++)doc.gebi("line-check-"+i).checked=!0,doc.gebi("line-red-"+i).value=elements[highlightedElement].camera.path[i-1].y,doc.gebi("line-green-"+i).value=elements[highlightedElement].camera.path[i-1].z,doc.gebi("line-blue-"+i).value=elements[highlightedElement].camera.path[i-1].x;for(Bb=[],i=1;i<10;i++)Aa=doc.gebi("line-check-"+i).checked?"visible":"hidden",doc.gebi("line-red-"+i).style.visibility=Aa,doc.gebi("line-green-"+i).style.visibility=Aa,doc.gebi("line-blue-"+i).style.visibility=Aa}};var changeElementData=function(){elements[highlightedElement].name=document.getElementById("edcHeader").value,ectf();let e=[];for(i=0;i<6;i++)e[i]=1*doc.gebi("edc"+featureIDs[i]).value;if("camera"===eT)elements[highlightedElement].rotate.x=finished.rotate.x=rad(e[3]),elements[highlightedElement].rotate.z=finished.rotate.z=rad(e[4]),elements[highlightedElement].rotate.y=finished.rotate.y=rad(e[5]);else{for(elementDataHide[eT].includes(0)&&(eC.translate.y=eF.translate.y=e[0],eC.translate.z=eF.translate.z=e[1],eC.translate.x=eF.translate.x=e[2],eC.rotate.x=eF.rotate.x=rad(e[3]),eC.rotate.z=eF.rotate.z=rad(e[4]),eC.rotate.y=eF.rotate.y=rad(e[5])),elementDataHide[eT].includes(6)||(eC.scale.y=1*doc.gebi("edcHeight").value,eF.scale.y=1*doc.gebi("edcHeight").value),elementDataHide[eT].includes(7)||(eC.scale.z=1*doc.gebi("edcDepth").value,eF.scale.z=1*doc.gebi("edcDepth").value),elementDataHide[eT].includes(8)||(eC.scale.x=1*doc.gebi("edcWidth").value,eF.scale.x=1*doc.gebi("edcWidth").value),i=9;i<featureIDs.length-1;i++)elementDataHide[eT].includes(i)||(Cc=doc.gebi("edc"+featureIDs[i]),"n"===elementDataType.charAt(i)?eC[edI.string[i]]=eF[edI.string[i]]=1*Cc.value:"b"===elementDataType.charAt(i)?eC[edI.string[i]]=eF[edI.string[i]]=Cc.checked:eC[edI.string[i]]=eF[edI.string[i]]=Cc.value);if("hemisphere"===eT&&(eC.scale.x=eF.scale.x=eC.radius,eC.scale.y=eF.scale.y=eC.radius,eC.scale.z=eF.scale.z=eC.radius),"circle"!==eT&&"torus"!==eT||(eC.scale.x=eF.scale.x=eC.radius,eC.scale.y=eF.scale.y=eC.radius),"cone"!==eT&&"cylinder"!==eT||(eC.scale.x=eF.scale.x=eC.scale.z,eC.scale.y=eF.scale.y=eC.scale.z),"cylinder"===eT&&(eC.frontBase.backface=eF.frontBase.backface=eC.backface,eC.rearBase.backface=eF.rearBase.backface=eC.backface),!elementDataHide[eT].includes(26)){for(Bb=[],i=1;i<10;i++)Aa=doc.gebi("line-check-"+i).checked?"visible":"hidden",doc.gebi("line-red-"+i).style.visibility=Aa,doc.gebi("line-green-"+i).style.visibility=Aa,doc.gebi("line-blue-"+i).style.visibility=Aa,"visible"===Aa&&Bb.push({x:doc.gebi("line-blue-"+i).value,y:doc.gebi("line-red-"+i).value,z:doc.gebi("line-green-"+i).value});elements[highlightedElement].camera.path=Bb,elements[highlightedElement].finished.path=Bb,elements[highlightedElement].camera.updatePath(),elements[highlightedElement].finished.updatePath()}}},exportMenu=function(){doc.gebi("export").style.visibility="visible"},exportJS=function(){log("%cStarting Export","font-weight: bold;"),console.time("Export Time");let e,t="",a=[],n={},o=!doc.gebi("ex-min").checked,l=doc.gebi("ex-jjs").checked,s=doc.gebi("ex-css").value,r=1*doc.gebi("ex-wh").value,c=1*doc.gebi("ex-ht").value,d=doc.gebi("ex-dr").checked,g=doc.gebi("ex-dro").checked,m=doc.gebi("ex-iid").value,u="addTo",h="translate",p="rotate",b="width",f="height",y="depth",v="color",E="stroke",D="diameter",x="radius",z="cornerRadius",A="fill",C="path",F="backface",k="topFace",w="bottomFace",B="frontFace",T="rearFace",S="leftFace",I="rightFace",M="quarters",R="sides",Z=function(t,a){return 0===e[a][t]?"":t+":"+e[a][t]+","},H=function(){return o?"\n":""},G=function(){return o?"\n\t":""},U=function(t,a){return e[t]===a?"":t+":"+e[t]+","+G()},j=function(t,n){switch(t){case"a":return u+":"+(0===a[n]?m+",":"groups["+a[n]+"],")+G();case"t":return h+":{"+Z("x",h)+Z("y",h)+Z("z",h)+"},"+G();case"r":return p+":{"+Z("x",p)+Z("y",p)+Z("z",p)+"},"+G();case"w":return 1===e.scale.x?"":b+":"+e.scale.x+","+G();case"h":return 1===e.scale.y?"":f+":"+e.scale.y+","+G();case"d":return 1===e.scale.z?"":y+":"+e.scale.z+","+G();case"c":return"#333"===e[v]?"":v+':"'+e[v]+'",'+G();case"s":return U(E,"0");case"f":return U(A,null);case"di":return U(D,1);case"rad":return U(x,1);case"crad":return U(z,!0);case"p":return C+":"+e[C]+","+H();case"bf":return U(F,null);case"topF":return U(k,null);case"bottomF":return U(w,null);case"frontF":return U(B,null);case"rearF":return U(T,null);case"leftF":return U(S,null);case"rightF":return U(I,null);case"q":return U(M,4);case"sd":return U(R,3)}};if(-1!==!s.indexOf(" "))if(-1!==!m.indexOf(" ")){if(l||(t+="<script>"),t+=o?"\n":"",t+=o?d?"var generatedBy='Zdog-house';\nvar is=!0;":"var generatedBy='Zdog-house';var title = \""+fileData.name+'"':d?"var generatedBy='Zdog-house',is=!0,":"var generatedBy='Zdog-house',title=\""+fileData.name+'"',a=elements[0].rotate,t+=o?"\nvar ":"",t+=m+"= new Zdog.Illustration({"+G()+"element:'#"+s+"',"+G()+"rotate:{"+(0===a.x?"":"x:"+a.x+",")+(0===a.y?"":"x:"+a.y+",")+(0===a.z?"":"x:"+a.z+",")+"}"+(d?","+G()+"dragRotate:!0,"+G()+"onDragStart:function(){is = !1},"+(g?G()+"onDragEnd:function(){is = !0}"+H():H()):"")+"})",a=[],fileData.groups.length>0){for(t+=o?";\nvar groups=[\n\t":",groups=[",i=0;i<fileData.groups.length;i++)n[fileData.groups[i].name]=i;for(log(n),i=0;i<elements.length;i++)a.push(n[elements[i].group]);for(log(a),i=0;i<fileData.groups.length;i++)t+="new Zdog.Group({addTo:"+m+",updateSort:!0}),"+(o?" //"+fileData.groups[i].name+"\n\t":"");t+="];"+H()}else t+=";"+H();for(log(t),i=0;i<elements.length;i++){switch(log(t),t+="camera"===elements[i].type?"":"new Zdog.",e=elements[i].camera,log(t),elements[i].type){case"rect":t+="Rect({"+G()+j("a",i)+j("t")+j("r")+j("w")+j("h")+j("c")+j("f")+j("s")+"});";break;case"roundedrect":t+="RoundedRect({"+G()+j("a",i)+j("t")+j("r")+j("w")+j("h")+j("c")+j("f")+j("s")+j("crad")+"});";break;case"circle":t+="Circle({"+G()+j("a",i)+j("t")+j("r")+j("w")+j("h")+j("c")+j("f")+j("s")+j("q")+"});";break;case"ellipse":t+="Ellipse({"+G()+j("a",i)+j("t")+j("r")+j("w")+j("h")+j("c")+j("f")+j("s")+j("q")+"});";break;case"polygon":t+="Polygon({"+G()+j("a",i)+j("t")+j("r")+j("w")+j("h")+j("c")+j("f")+j("s")+j("sd")+"});";break;case"line":t+="Line({"+G()+j("a",i)+j("p")+j("c")+j("s")+"fill:false,closed:false,});";break;case"text":t+="Text({"+G()+j("a",i)+j("t")+j("r")+j("c")+"value:"+e.value+",fontSize:"+e.fontSize+",fill:false,closed:false,});";break;case"shape":t+="Shape({"+G()+j("a",i)+j("p")+j("c")+j("s")+"fill:true,closed:true,});";break;case"torus":t+="Ellipse({"+G()+j("a",i)+j("t")+j("r")+j("rad")+j("c")+j("s")+j("q")+"});";break;case"hemisphere":t+="Hemisphere({"+G()+j("a",i)+j("t")+j("r")+j("rad")+j("c")+j("f")+j("s")+j("bf")+"});";break;case"cylinder":t+="Cylinder({"+G()+j("a",i)+j("t")+j("r")+j("w")+j("h")+j("d")+j("di")+j("c")+j("f")+j("s")+j("bf")+"});";break;case"cone":t+="Cone({"+G()+j("a",i)+j("t")+j("r")+j("d")+j("c")+j("f")+j("s")+j("bf")+"});";break;case"cube":t+="Cube({"+G()+j("a",i)+j("t")+j("r")+j("w")+j("h")+j("d")+j("c")+j("f")+j("s")+j("topF")+j("bottomF")+j("frontF")+j("rearF")+j("leftF")+j("rightF")+"});";break;case"camera":t+="";break;default:t+="//error\n"}t+=H()}t+="function animate(){"+H()+(0===fileData.animate.red?"":m+".rotate.x+=is?"+rad(fileData.animate.red)+":0;"+H())+(0===fileData.animate.blue?"":m+".rotate.y+=is?"+rad(fileData.animate.blue)+":0;"+H())+(0===fileData.animate.green?"":m+".rotate.z+=is?"+rad(fileData.animate.green)+":0;"+H())+m+".updateRenderGraph();"+H()+"requestAnimationFrame(animate);"+H()+"}"+H(),t+="animate();"+H(),l||(t+="<\/script>"),doc.gebi("export-re-canvas").value='<canvas id="'+s+'" width="'+r+'" height="'+c+'" style="background:'+fileData.background+'"></canvas>',doc.gebi("export-results").value=t,console.timeEnd("Export Time"),log("%cExport Finished","font-weight: bold;"),doc.gebi("export-results-div").style.visibility="visible"}else alert("The illustration ID can not have a space in it.");else alert("The css ID can not have a space in it.")},changeSidebarData=function(){fileData.name=doc.gebi("sidebar-name").value,fileData.background=doc.gebi("sidebar-background").value,doc.camera.style.background=doc.gebi("sidebar-background").value,doc.finished.style.background=doc.gebi("sidebar-background").value,fileData.zoom=doc.gebi("sidebar-zoom").value,camera.zoom=doc.gebi("sidebar-zoom").value,finished.zoom=doc.gebi("sidebar-zoom").value,fileData.animate.red=doc.gebi("sidebar-red").value,fileData.animate.green=doc.gebi("sidebar-green").value,fileData.animate.blue=doc.gebi("sidebar-blue").value},updateStyle=function(){"rgb"===(style="rgb"===style?"roy":"rgb")&&(directionalCubeElement.color="#C00",directionalCubeElement.leftFace="#00F",directionalCubeElement.rightFace="#00F",directionalCubeElement.frontFace="#080",directionalCubeElement.rearFace="#080"),"roy"===style&&(directionalCubeElement.color="#C25",directionalCubeElement.leftFace="#EA0",directionalCubeElement.rightFace="#EA0",directionalCubeElement.frontFace="#E62",directionalCubeElement.rearFace="#E62"),doc.gebi("edIRed").src=iconS+style+"/red.svg",doc.gebi("edIGreen").src=iconS+style+"/green.svg",doc.gebi("edIBlue").src=iconS+style+"/blue.svg",doc.gebi("edIRedR").src=iconS+style+"/redR.svg",doc.gebi("edIGreenR").src=iconS+style+"/greenR.svg",doc.gebi("edIBlueR").src=iconS+style+"/blueR.svg",doc.gebi("edIHeight").src=iconS+style+"/height.svg",doc.gebi("edIDepth").src=iconS+style+"/depth.svg",doc.gebi("edIWidth").src=iconS+style+"/width.svg",doc.gebi("sidebar-RedR").src=iconS+style+"/redR.svg",doc.gebi("sidebar-GreenR").src=iconS+style+"/greenR.svg",doc.gebi("sidebar-BlueR").src=iconS+style+"/blueR.svg",doc.moveIcon.src=mode.move?iconS+style+"/moveH.svg":iconS+style+"/move.svg",doc.rotateIcon.src=(mode.rotate,iconS+style+"/rotate.svg"),doc.sizeIcon.src=mode.size?iconS+style+"/sizeH.svg":iconS+style+"/size.svg",doc.redIcon.src=dimension.red?iconS+style+"/redH.svg":iconS+style+"/red.svg",doc.greenIcon.src=dimension.green?iconS+style+"/greenH.svg":iconS+style+"/green.svg",doc.blueIcon.src=dimension.blue?iconS+style+"/blueH.svg":iconS+style+"/blue.svg"},cameraMove=function(){alert(1)},cameraDragger=new Zdog.Dragger({startElement:camera.element,onDragStart:function(){undoElement=elements[highlightedElement].camera,pastMoveX=0,pastMoveY=0},onDragMove:function(e,t,a){ectf(),"camera"!==eT&&(dimension.red&&(Aa=Math.cos(camera.rotate.x),Bb=Math.sin(camera.rotate.y)*Math.cos(camera.rotate.x),Cc=Aa<.2&&Aa>-.2?0:Aa,Dd=0,mode.move&&(eC.translate.y+=(a-pastMoveY)/Cc+(t-pastMoveX)*Dd,eF.translate.y+=(a-pastMoveY)/Cc+(t-pastMoveX)*Dd),mode.rotate&&(eC.rotate.x+=((a-pastMoveY)/Cc+(t-pastMoveX)*Dd)/TAU,eF.rotate.x+=((a-pastMoveY)/Cc+(t-pastMoveX)*Dd)/TAU),mode.size&&(eC.scale.y-=(a-pastMoveY)/Cc+(t-pastMoveX)*Dd/2,eF.scale.y-=(a-pastMoveY)/Cc+(t-pastMoveX)*Dd/2)),dimension.green&&(Aa=Math.sin(camera.rotate.y),Bb=Math.sin(camera.rotate.x),Cc=Aa<.2&&Aa>-.2?1:Aa,Dd=Bb<.2&&Bb>-.2?1:Bb,mode.move&&(eC.translate.z+=(t-pastMoveX)*-Aa+(a-pastMoveY)*-Bb,eF.translate.z+=(t-pastMoveX)*-Aa+(a-pastMoveY)*-Bb),mode.rotate&&(eC.rotate.z+=((t-pastMoveX)/-Cc+(a-pastMoveY)/Dd)/TAU,eF.rotate.z+=((t-pastMoveX)/-Cc+(a-pastMoveY)/Dd)/TAU),mode.size&&(eC.scale.z+=(t-pastMoveX)/-Cc+(a-pastMoveY)/Dd/2,eF.scale.z+=(t-pastMoveX)/-Cc+(a-pastMoveY)/Dd/2)),dimension.blue&&(Aa=Math.cos(camera.rotate.y),Bb=Math.sin(camera.rotate.x)*Math.cos(camera.rotate.y),Cc=Aa<.2&&Aa>-.2?1:Aa,Dd=Bb>300?0:Bb,mode.move&&(eC.translate.x+=(t-pastMoveX)/Cc+(a-pastMoveY)*Dd,eF.translate.x+=(t-pastMoveX)/Cc+(a-pastMoveY)*Dd),mode.rotate&&(eC.rotate.y+=((t-pastMoveX)/Cc+(a-pastMoveY)*Dd)/TAU,eF.rotate.y+=((t-pastMoveX)/Cc+(a-pastMoveY)*Dd)/TAU),mode.size&&(eC.scale.x+=(t-pastMoveX)/Cc+(a-pastMoveY)*Dd/2,eF.scale.x+=(t-pastMoveX)/Cc+(a-pastMoveY)*Dd/2)),pastMoveX=t,pastMoveY=a)},onDragEnd:function(){loadElementData(highlightedElement)}}),finishedDragger=new Zdog.Dragger({startElement:finished.element,onDragStart:function(){draggable=!0},onDragEnd:function(){draggable=!1}});function animate(){draggable||(finished.rotate.x+=rad(fileData.animate.red),finished.rotate.z+=rad(fileData.animate.green),finished.rotate.y+=rad(fileData.animate.blue)),finished.updateRenderGraph(),camera.rotate=cube.rotate,camera.updateRenderGraph(),cube.updateRenderGraph(),requestAnimationFrame(animate)}animate(),loadElementData(0),doc.cover.style.visibility="hidden",log("%cScript Loaded","font-weight: bold; text-align: center;"),console.timeEnd("Script Loading Time"),log("Made by %cGem Games","font-weight: bold; color: #3a67fb; text-align: center;"),log("Hi! If you're seeing this, it means you're looking at the code/console. Please note this code isn't wrapped up with a bow, as I feel there is no purpose of doing so."),log("Github: %chttps://github.com/gemgames/zdoghouse","color: #3a67fb;");
