var i,j,k,Aa,Bb,Cc,Dd,Zdog,Zfont,pastMoveX=0,pastMoveY=0;Zfont.init(Zdog);var undoElement,draggable,TAU=Zdog.TAU,round=function(e){return Math.round(e)},power=function(e){return Math.pow(e)},sqrt=function(e){return Math.sqrt(e)},abs=function(e){return Math.abs(e)},floor=function(e){return Math.floor(e)},rad=function(e){return e/360*TAU},deg=function(e){return e/TAU*360},sin=function(e){return Math.sin(e/360*TAU)},cos=function(e){return Math.cos(e/360*TAU)},pos=function(e){return e%TAU>=0?1:-1},temp=function(){},style="rgb",doc={gebi:function(e){return document.getElementById(e)}};doc={gebi:function(e){return document.getElementById(e)},cover:doc.gebi("cover"),debug:doc.gebi("debug"),camera:doc.gebi("camera"),finished:doc.gebi("finished"),elements:doc.gebi("elements"),elementsP:doc.gebi("elementsP"),elementData:doc.gebi("elementsData"),addElements:doc.gebi("addElements"),elementDataTable:doc.gebi("elementsDataTable"),cameraDiv:doc.gebi("cameraDiv"),finishedDiv:doc.gebi("finishedDiv"),sidebar:doc.gebi("sidebar"),moveIcon:doc.gebi("moveIcon"),rotateIcon:doc.gebi("rotateIcon"),sizeIcon:doc.gebi("sizeIcon"),redIcon:doc.gebi("redIcon"),greenIcon:doc.gebi("greenIcon"),blueIcon:doc.gebi("blueIcon")};var eC,eF,eT,edc=["edcRed","edcGreen","edcBlue","edcRedR","edcGreenR","edcBlueR","edcHeight","edcDepth","edcWidth","edcDiameter","edcRadius","edcColor","edcFill","edcStroke","edcFrontFace","edcRearFace","edcLeftFace","edcRightFace","edcTopFace","edcBottomFace","edcQuarters","edcCornerRadius","edcSides","edcBackFace","edcText","edcFontSize","edcLine"],edb=["edbRed","edbGreen","edbBlue","edbRedR","edbGreenR","edbBlueR","edbHeight","edbDepth","edbWidth","edbDiameter","edbRadius","edbColor","edbFill","edbStroke","edbFrontFace","edbRearFace","edbLeftFace","edbRightFace","edbTopFace","edbBottomFace","edbQuarters","edbCornerRadius","edbSides","edbBackFace","edbText","edbFontSize","edbLine"],edH={rect:[7,9,10,14,15,16,17,18,19,20,21,22,23,24,25,26],roundedrect:[7,9,10,14,15,16,17,18,19,20,22,23,24,25,26],ellipse:[7,9,10,14,15,16,17,18,19,21,22,23,24,25,26],circle:[6,7,8,9,14,15,16,17,18,19,21,22,23,24,25,26],polygon:[7,9,10,14,15,16,17,18,19,20,21,23,24,25,26],line:[0,1,2,3,4,5,6,7,8,9,10,12,14,15,16,17,18,19,20,21,22,23,24,25],shape:[0,1,2,3,4,5,6,7,8,9,10,12,14,15,16,17,18,19,20,21,22,23,24,25],hemisphere:[6,7,8,10,14,15,16,17,18,19,20,21,22,24,25,26],cone:[10,14,15,16,17,18,19,20,21,22,24,25,26],cylinder:[10,15,16,17,18,19,20,21,22,24,25,26],box:[9,10,20,21,22,23,24,25,26],text:[6,7,8,9,10,12,13,14,15,16,17,18,19,20,21,22,23,26],camera:[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],folder:[0,1,2,3,4,5,6,7,8,9,10,12,14,15,16,17,18,19,20,21,22,23,24,25,26]},edI={string:["translate.y","translate.z","translate.x","rotate.x","rotate.z","rotate.y","scale.y","scale.z","scale.x","diameter","radius","color","fill","stroke","frontFace","rearFace","leftFace","rightFace","topFace","bottomFace","quarters","cornerRadius","sides","backface","value","fontSize","path"],array:[]},edT=["n","n","n","n","n","n","n","n","n","n","n","s","b","n","s","s","s","s","s","s","n","n","n","s","s","n","?","b"],cameraCanvas=doc.camera.getContext("2d"),mode={mouse:!1,move:!1,rotate:!1},dimension={red:!1,green:!1,blue:!1},finished=new Zdog.Illustration({element:"#finished",resize:!0,dragRotate:!0}),camera=new Zdog.Illustration({element:"#camera",resize:!0}),cube=new Zdog.Illustration({element:"#cube",dragRotate:!0}),debug=function(e){doc.debug.innerHTML=e},subModes=function(e){mode.move&&(doc.redIcon.src=dimension.red?"/icons/"+style+"/redH.svg":"/icons/"+style+"/red.svg",doc.greenIcon.src=dimension.green?"/icons/"+style+"/greenH.svg":"/icons/"+style+"/green.svg",doc.blueIcon.src=dimension.blue?"/icons/"+style+"/blueH.svg":"/icons/"+style+"/blue.svg"),mode.rotate&&(doc.redIcon.src=dimension.red?"/icons/"+style+"/redRH.svg":"/icons/"+style+"/redR.svg",doc.greenIcon.src=dimension.green?"/icons/"+style+"/greenRH.svg":"/icons/"+style+"/greenR.svg",doc.blueIcon.src=dimension.blue?"/icons/"+style+"/blueRH.svg":"/icons/"+style+"/blueR.svg"),mode.size&&(doc.redIcon.src=dimension.red?"/icons/"+style+"/heightH.svg":"/icons/"+style+"/height.svg",doc.greenIcon.src=dimension.green?"/icons/"+style+"/depthH.svg":"/icons/"+style+"/depth.svg",doc.blueIcon.src=dimension.blue?"/icons/"+style+"/widthH.svg":"/icons/"+style+"/width.svg")},clickMode=function(e){(mode={size:!1,move:!1,rotate:!1})[e]=!0,doc.moveIcon.src=mode.move?"/icons/"+style+"/moveH.svg":"/icons/"+style+"/move.svg",doc.rotateIcon.src=mode.rotate?"/icons/"+style+"/rotateH.svg":"/icons/"+style+"/rotate.svg",doc.sizeIcon.src=mode.size?"/icons/"+style+"/sizeH.svg":"/icons/"+style+"/size.svg",subModes()},click3D=function(e){(dimension={red:!1,green:!1,blue:!1})[e]=!0,subModes()},ectf=function(){eT=elements[highlightedElement].type,eC=elements[highlightedElement].camera,eF=elements[highlightedElement].finished};clickMode("move"),click3D("green");var directionalCubeElement,noto=new Zdog.Font({src:"https://cdn.glitch.com/ddcae6e8-a8ce-49f0-af72-87dbb1d6a609%2FNotoSans-Regular.ttf?v=1591379137765"}),lato=new Zdog.Font({src:"https://cdn.glitch.com/ddcae6e8-a8ce-49f0-af72-87dbb1d6a609%2FLato-Regular.ttf?v=1591372213037"}),cubeElements=function(){directionalCubeElement=new Zdog.Box({addTo:cube,width:40,height:40,depth:40,color:"#C00",leftFace:"#00F",rightFace:"#00F",frontFace:"#080",rearFace:"#080"});var e=new Zdog.Text({addTo:cube,translate:{z:30,x:-17,y:3},color:"#FFF",fill:!0,fontSize:10,font:lato,value:["FRONT"]});e.copy({translate:{z:-30,x:13,y:3},rotate:{y:TAU/2},value:["BACK"]}),e.copy({translate:{z:14,x:30,y:3},rotate:{y:-TAU/4},value:["RIGHT"]}),e.copy({translate:{z:-12,x:-30,y:3},rotate:{y:TAU/4},value:["LEFT"]}),e.copy({translate:{z:3,x:-9,y:-30},rotate:{x:-TAU/4,z:TAU/2,y:TAU/2},value:["TOP"]}),e.copy({translate:{z:-2,x:-17,y:30},rotate:{x:-TAU/4},fontSize:8,value:["BOTTOM"]})};cubeElements();var loadElementData=function(){},fileData={name:"My Model",background:"#FFFFFF",animate:{red:0,green:0,blue:3},groups:[{name:"Camera",path:elements}]},elements=[{type:"camera",name:"Camera",translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0}},{type:"ellipse",name:"Ellipse",camera:new Zdog.Ellipse({addTo:camera,width:1,height:1,depth:1,scale:{x:80,y:80,z:0},diameter:80,translate:{z:40,x:0,y:0},stroke:20,color:"#663366"}),finished:new Zdog.Ellipse({addTo:finished,width:1,height:1,depth:1,scale:{x:80,y:80,z:0},diameter:80,translate:{z:40,x:0,y:0},stroke:20,color:"#663366"})},{type:"rect",name:"Rectangle",camera:new Zdog.Rect({addTo:camera,width:1,height:1,depth:1,scale:{x:80,y:80,z:0},translate:{z:-40,x:0,y:0},stroke:12,color:"#EE6622",fill:!0}),finished:new Zdog.Rect({addTo:finished,width:1,height:1,depth:1,scale:{x:80,y:80,z:0},translate:{z:-40,x:0,y:0},stroke:12,color:"#EE6622",fill:!0})}],templateElements={rect:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:0,y:0,z:0},scale:{y:80,x:80},color:"#EE6622",fill:!0,stroke:0},roundedrect:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:80,z:0},color:"#EEAA00",fill:!0,stroke:0,cornerRadius:20},ellipse:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:60,z:0},diameter:1,color:"#CC2255",fill:!0,stroke:0,quarters:4},circle:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:80,z:0},diameter:20,color:"#EE6622",fill:!0,stroke:0,quarters:4},polygon:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:80,z:0},color:"#EEAA00",backface:"#EEAA00",fill:!1,stroke:20,sides:5},line:{color:"#EE6622",path:[{x:-40,y:-40,z:0},{x:40,y:40,z:0}],stroke:10,closed:!1},text:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},color:"#663366",font:lato,fill:!0,value:["Aa"],fontSize:60,stroke:0},torus:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:0,y:0,z:0},diameter:20,color:"#EE6622",fill:!1,stroke:0,quarters:4},hemisphere:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:0,y:0,z:0},diameter:1,color:"#CC2255",fill:!0,stroke:0,backface:"#EEAA00"},cone:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,diameter:1,scale:{x:0,y:0,z:0},length:1,color:"#663366",fill:!0,stroke:0,backface:"#CC2255"},cylinder:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:0,y:0,z:0},diameter:1,length:1,color:"#C25",fill:!0,stroke:0,backface:"#EE6622"},box:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},width:1,height:1,depth:1,scale:{x:80,y:80,z:80},length:80,color:"#CC2255",fill:!0,stroke:0,frontFace:"#EE6622",rearFace:"#EE6622",leftFace:"#EEAA00",rightFace:"#EEAA00",topFace:"#CC2255",bottomFace:"#CC2255",backFace:!1},shape:{path:[{x:-40,y:-40,z:0},{x:40,y:-40,z:0},{x:-40,y:40,z:0},{x:40,y:40,z:0}],color:"#663366",fill:!0},folder:{updateSort:!0},object:{translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0}}},highlightedElement=0,loadElements=function(){for(Aa="",i=0;i<elements.length;i++)Bb=i===highlightedElement?'id="highlightedElement"':"",Cc="camera"===elements[i].type?"":'<div class="moreDropdown"><img class="moreIcon" src="/icons/elements/more.svg"><img class="more-content" onclick="duplicateElement('+i+')"src="/icons/file/duplicate.svg"><img class="more-content" onclick="deleteElement('+i+')" src="/icons/file/delete.svg"></div>',Aa=Aa.concat('<div class="elementName" '+Bb+' onclick="loadElementData('+i+')"><img src="/icons/elements/'+elements[i].type+'.svg">'+elements[i].name+Cc+"</div>");doc.elementsP.innerHTML=Aa},elementSwitch=function(e){switch(e){case"box":Aa=new Zdog.Box(Aa),temp(),Bb=new Zdog.Box(Bb);break;case"circle":Aa=new Zdog.Ellipse(Aa),temp(),Bb=new Zdog.Ellipse(Bb);break;case"cone":Aa=new Zdog.Cone(Aa),temp(),Bb=new Zdog.Cone(Bb);break;case"cylinder":Aa=new Zdog.Cylinder(Aa),temp(),Bb=new Zdog.Cylinder(Bb);break;case"ellipse":Aa=new Zdog.Ellipse(Aa),temp(),Bb=new Zdog.Ellipse(Bb);break;case"hemisphere":Aa=new Zdog.Hemisphere(Aa),temp(),Bb=new Zdog.Hemisphere(Bb);break;case"line":Aa=new Zdog.Shape(Aa),temp(),Bb=new Zdog.Shape(Bb);break;case"polygon":Aa=new Zdog.Polygon(Aa),temp(),Bb=new Zdog.Polygon(Bb);break;case"rect":console.log(Aa),Aa=new Zdog.Rect(Aa),temp(),console.log(Aa),Bb=new Zdog.Rect(Bb);break;case"roundedrect":Aa=new Zdog.RoundedRect(Aa),temp(),Bb=new Zdog.RoundedRect(Bb);break;case"shape":Aa=new Zdog.Shape(Aa),temp(),Bb=new Zdog.Shape(Bb);break;case"text":Aa=new Zdog.Text(Aa),temp(),Bb=new Zdog.Text(Bb);break;case"torus":Aa=new Zdog.Ellipse(Aa),temp(),Bb=new Zdog.Ellipse(Bb);break;case"folder":Aa=new Zdog.Group(Aa),temp(),Bb=new Zdog.Group(Bb)}},addElement=function(e){temp=function(){(Bb=templateElements[e]).addTo=finished},(Aa=templateElements[e]).addTo=camera,elementSwitch(e),"folder"===e||"object"==e?elements.splice(1,0,{name:e,type:e,root:elements[elements.length],camera:Aa,finished:Bb,data:[]}):elements.push({name:e,type:e,camera:Aa,finished:Bb}),highlightedElement=elements.length-1,loadElements(),loadElementData(highlightedElement)},duplicateElement=function(e){temp=function(){(Bb=elements[e].finished).addTo=finished},(Aa=elements[e].camera).addTo=camera,elementSwitch(elements[e].type),elements.splice(e,0,{type:elements[e].type,name:elements[e].name,camera:Aa,finished:Bb}),loadElements(),loadElementData(e+1)},deleteElement=function(e){elements[e].camera.visible=!1,elements[e].finished.visible=!1,elements.splice(e,1),e===elements.length&&(highlightedElement=e-1)};loadElements(),loadElementData=function(e){highlightedElement=e,loadElements();var t=(Aa="camera"===elements[e].type)?elements[e]:elements[e].camera;for(document.getElementById("edcHeader").value=elements[highlightedElement].name,edI.array=[t.translate.y,t.translate.z,t.translate.x,deg(t.rotate.x),deg(t.rotate.z),deg(t.rotate.y),Aa?0:t.scale.y,Aa?0:t.scale.z,Aa?0:t.scale.x,t.diameter,t.radius,t.color,t.fill,t.stroke,t.frontFace,t.rearFace,t.leftFace,t.rightFace,t.topFace,t.bottomFace,t.quarters,t.cornerRadius,t.sides,t.backface,t.value,t.fontSize,t.path],i=0;i<edb.length-1;i++)document.getElementById(edb[i]).style.display="block",edH[elements[highlightedElement].type].includes(i)||(console.log(i+" "+edb[i]),"b"===edT[i]?document.getElementById(edc[i]).checked=edI.array[i]:document.getElementById(edc[i]).value=edI.array[i]);if(function(e){for(i=0;i<e.length;i++)document.getElementById(edb[e[i]]).style.display="none"}(edH[elements[highlightedElement].type]),!edH[elements[highlightedElement].type].includes(26)){for(console.log("in"),document.getElementById(edb[26]).style.display="block",i=1;i<elements[highlightedElement].camera.path.length+1;i++)doc.gebi("line-check-"+i).checked=!0,doc.gebi("line-red-"+i).value=elements[highlightedElement].camera.path[i-1].y,doc.gebi("line-green-"+i).value=elements[highlightedElement].camera.path[i-1].z,doc.gebi("line-blue-"+i).value=elements[highlightedElement].camera.path[i-1].x;for(Bb=[],i=1;i<10;i++)Aa=doc.gebi("line-check-"+i).checked?"visible":"hidden",doc.gebi("line-red-"+i).style.visibility=Aa,doc.gebi("line-green-"+i).style.visibility=Aa,doc.gebi("line-blue-"+i).style.visibility=Aa}};var changeElementData=function(){if(elements[highlightedElement].name=document.getElementById("edcHeader").value,ectf(),"camera"===eT)elements[highlightedElement].rotate.x=doc.gebi(edc[3]).value,elements[highlightedElement].rotate.z=doc.gebi(edc[4]).value,elements[highlightedElement].rotate.y=doc.gebi(edc[5]).value,finished.rotate.x=1*doc.gebi(edc[3]).value,finished.rotate.z=1*doc.gebi(edc[4]).value,finished.rotate.y=1*doc.gebi(edc[5]).value;else{for(edH[eT].includes(0)||(eC.translate.y=1*doc.gebi(edc[0]).value,eC.translate.z=1*doc.gebi(edc[1]).value,eC.translate.x=1*doc.gebi(edc[2]).value,eC.rotate.x=rad(1*doc.gebi(edc[3]).value),eC.rotate.z=rad(1*doc.gebi(edc[4]).value),eC.rotate.y=rad(1*doc.gebi(edc[5]).value),eF.translate.y=1*doc.gebi(edc[0]).value,eF.translate.z=1*doc.gebi(edc[1]).value,eF.translate.x=1*doc.gebi(edc[2]).value,eF.rotate.x=rad(1*doc.gebi(edc[3]).value),eF.rotate.z=rad(1*doc.gebi(edc[4]).value),eF.rotate.y=rad(1*doc.gebi(edc[5]).value)),edH[eT].includes(6)||(eC.scale.y=1*doc.gebi(edc[6]).value,eF.scale.y=1*doc.gebi(edc[6]).value),edH[eT].includes(7)||(eC.scale.z=1*doc.gebi(edc[7]).value,eF.scale.z=1*doc.gebi(edc[7]).value),edH[eT].includes(8)||(eC.scale.x=1*doc.gebi(edc[8]).value,eF.scale.x=1*doc.gebi(edc[8]).value),i=9;i<edb.length-1;i++)edH[eT].includes(i)||(Cc=doc.gebi(edc[i]).value,"n"===edT[i]?(eC[edI.string[i]]=1*Cc,eF[edI.string[i]]=1*Cc):"b"===edT[i]?(eC[edI.string[i]]=doc.gebi(edc[i]).checked,eF[edI.string[i]]=doc.gebi(edc[i]).checked):(eC[edI.string[i]]=Cc,eF[edI.string[i]]=Cc));if("hemisphere"===eT&&(eC.scale.x=eC.diameter,eC.scale.y=eC.diameter,eC.scale.z=eC.diameter,eF.scale.x=eF.diameter,eF.scale.y=eF.diameter,eF.scale.z=eF.diameter,eC.diameter=1,eF.diameter=1),"cone"!==eT&&"cylinder"!==eT||(eC.scale.x=eC.scale.z,eC.scale.y=eC.scale.z,eC.scale.z=eC.scale.z,eF.scale.x=eF.scale.z,eF.scale.y=eF.scale.z,eF.scale.z=eF.scale.z),!edH[eT].includes(26)){for(Bb=[],i=1;i<10;i++)Aa=doc.gebi("line-check-"+i).checked?"visible":"hidden",console.log(Aa,"#232425"),doc.gebi("line-red-"+i).style.visibility=Aa,doc.gebi("line-green-"+i).style.visibility=Aa,doc.gebi("line-blue-"+i).style.visibility=Aa,"visible"===Aa&&Bb.push({x:doc.gebi("line-blue-"+i).value,y:doc.gebi("line-red-"+i).value,z:doc.gebi("line-green-"+i).value});elements[highlightedElement].camera.path=Bb,elements[highlightedElement].finished.path=Bb,elements[highlightedElement].camera.updatePath(),elements[highlightedElement].finished.updatePath()}}},changeSidebarData=function(){fileData.name=doc.gebi("sidebar-name").value,fileData.background=doc.gebi("sidebar-background").value,doc.camera.style.background=doc.gebi("sidebar-background").value,doc.finished.style.background=doc.gebi("sidebar-background").value,fileData.animate.red=doc.gebi("sidebar-red").value,fileData.animate.green=doc.gebi("sidebar-green").value,fileData.animate.blue=doc.gebi("sidebar-blue").value},updateStyle=function(){"rgb"===(style="rgb"===style?"roy":"rgb")&&(directionalCubeElement.color="#C00",directionalCubeElement.leftFace="#00F",directionalCubeElement.rightFace="#00F",directionalCubeElement.frontFace="#080",directionalCubeElement.rearFace="#080"),"roy"===style&&(directionalCubeElement.color="#C25",directionalCubeElement.leftFace="#EA0",directionalCubeElement.rightFace="#EA0",directionalCubeElement.frontFace="#E62",directionalCubeElement.rearFace="#E62"),doc.gebi("edIRed").src="/icons/"+style+"/red.svg",doc.gebi("edIGreen").src="/icons/"+style+"/green.svg",doc.gebi("edIBlue").src="/icons/"+style+"/blue.svg",doc.gebi("edIRedR").src="/icons/"+style+"/redR.svg",doc.gebi("edIGreenR").src="/icons/"+style+"/greenR.svg",doc.gebi("edIBlueR").src="/icons/"+style+"/blueR.svg",doc.gebi("edIHeight").src="/icons/"+style+"/height.svg",doc.gebi("edIDepth").src="/icons/"+style+"/depth.svg",doc.gebi("edIWidth").src="/icons/"+style+"/width.svg",doc.gebi("sidebar-RedR").src="/icons/"+style+"/redR.svg",doc.gebi("sidebar-GreenR").src="/icons/"+style+"/greenR.svg",doc.gebi("sidebar-BlueR").src="/icons/"+style+"/blueR.svg",doc.moveIcon.src=mode.move?"/icons/"+style+"/moveH.svg":"/icons/"+style+"/move.svg",doc.rotateIcon.src=(mode.rotate,"/icons/"+style+"/rotate.svg"),doc.sizeIcon.src=mode.size?"/icons/"+style+"/sizeH.svg":"/icons/"+style+"/size.svg",doc.redIcon.src=dimension.red?"/icons/"+style+"/redH.svg":"/icons/"+style+"/red.svg",doc.greenIcon.src=dimension.green?"/icons/"+style+"/greenH.svg":"/icons/"+style+"/green.svg",doc.blueIcon.src=dimension.blue?"/icons/"+style+"/blueH.svg":"/icons/"+style+"/blue.svg"},cameraMove=function(){alert(1)};function animate(){draggable||(finished.rotate.x+=rad(fileData.animate.red),finished.rotate.z+=rad(fileData.animate.green),finished.rotate.y+=rad(fileData.animate.blue)),finished.updateRenderGraph(),camera.rotate=cube.rotate,camera.updateRenderGraph(),cube.updateRenderGraph(),requestAnimationFrame(animate)}new Zdog.Dragger({startElement:camera.element,onDragStart:function(){undoElement=elements[highlightedElement].camera,pastMoveX=0,pastMoveY=0},onDragMove:function(e,t,a){ectf(),"camera"!==eT&&(dimension.red&&(Aa=Math.cos(camera.rotate.x),Bb=Math.sin(camera.rotate.y)*Math.cos(camera.rotate.x),Cc=Aa<.2&&Aa>-.2?0:Aa,Dd=0,mode.move&&(eC.translate.y+=(a-pastMoveY)/Cc+(t-pastMoveX)*Dd,eF.translate.y+=(a-pastMoveY)/Cc+(t-pastMoveX)*Dd),mode.rotate&&(eC.rotate.x+=((a-pastMoveY)/Cc+(t-pastMoveX)*Dd)/TAU,eF.rotate.x+=((a-pastMoveY)/Cc+(t-pastMoveX)*Dd)/TAU),mode.size&&(eC.scale.y-=(a-pastMoveY)/Cc+(t-pastMoveX)*Dd/2,eF.scale.y-=(a-pastMoveY)/Cc+(t-pastMoveX)*Dd/2)),dimension.green&&(Aa=Math.sin(camera.rotate.y),Bb=Math.sin(camera.rotate.x),Cc=Aa<.2&&Aa>-.2?1:Aa,Dd=Bb<.2&&Bb>-.2?1:Bb,mode.move&&(eC.translate.z+=(t-pastMoveX)*-Aa+(a-pastMoveY)*-Bb,eF.translate.z+=(t-pastMoveX)*-Aa+(a-pastMoveY)*-Bb),mode.rotate&&(eC.rotate.z+=((t-pastMoveX)/-Cc+(a-pastMoveY)/Dd)/TAU,eF.rotate.z+=((t-pastMoveX)/-Cc+(a-pastMoveY)/Dd)/TAU),mode.size&&(eC.scale.z+=(t-pastMoveX)/-Cc+(a-pastMoveY)/Dd/2,eF.scale.z+=(t-pastMoveX)/-Cc+(a-pastMoveY)/Dd/2)),dimension.blue&&(Aa=Math.cos(camera.rotate.y),Bb=Math.sin(camera.rotate.x)*Math.cos(camera.rotate.y),Cc=Aa<.2&&Aa>-.2?1:Aa,Dd=Bb>300?0:Bb,mode.move&&(eC.translate.x+=(t-pastMoveX)/Cc+(a-pastMoveY)*Dd,eF.translate.x+=(t-pastMoveX)/Cc+(a-pastMoveY)*Dd),mode.rotate&&(eC.rotate.y+=((t-pastMoveX)/Cc+(a-pastMoveY)*Dd)/TAU,eF.rotate.y+=((t-pastMoveX)/Cc+(a-pastMoveY)*Dd)/TAU),mode.size&&(eC.scale.x+=(t-pastMoveX)/Cc+(a-pastMoveY)*Dd/2,eF.scale.x+=(t-pastMoveX)/Cc+(a-pastMoveY)*Dd/2)),pastMoveX=t,pastMoveY=a)},onDragEnd:function(){console.log("Rx: "+camera.rotate.y),console.log("Ry: "+camera.rotate.x),console.log("x : "+Cc),console.log("y : "+Dd)}}),new Zdog.Dragger({startElement:finished.element,onDragStart:function(){draggable=!0},onDragEnd:function(){draggable=!1}}),animate(),loadElementData(1),doc.cover.style.visibility="hidden";
